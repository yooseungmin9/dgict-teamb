<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100dvh;
      background: #e8f2fb;;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Arial, sans-serif;
      display: grid;
      place-items: center;
    }

    /* ===== 컨테이너 ===== */
    .login {
      position: relative;               /* 버튼 위치 기준 */
      width: min(92vw, 380px);
      margin: auto;                     /* 화면 중앙 배치 */
      background: transparent;            /* 원본 디자인: 카드 배경 없음 */
      padding: 60px 20px 28px;
    }

    /* ===== 아바타 아이콘 원 ===== */
    .avatar {
      width: 96px;
      height: 96px;
      border: 3px solid #2f76c2;
      border-radius: 50%;
      margin: 0 auto 20px;
      display: grid;
      place-items: center;
    }
    .avatar svg { width: 54px; height: 54px; fill: #2f76c2; }

    /* ===== 입력 그룹 ===== */
    .field {
      position: relative;
      margin: 10px 0;
    }
    .field input {
      width: 100%;
      height: 48px;
      padding: 0 56px 0 44px;             /* 왼쪽 아이콘/오른쪽 토글 공간 */
      border: 2px solid var#2f76c2;
      border-radius: 10px;
      background: white;
      font-size: 16px;
      color: #0d3f70;
      outline: none;
      box-sizing: border-box;
    }
    .field input::placeholder { color: #7aa8d9; }
    .field input:focus { box-shadow: 0 0 0 3px rgba(47,118,194,0.15); }

    /* 좌측 아이콘 */
    .field .left-icon {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      left: 8px;    /* 기존 12px → 살짝 안쪽 */
      width: 32px;
      height: 32px;
      display: grid;
      place-items: center;
      color: #2f76c2;
    }
    /* 기존 .field .right-icon 수정 */
    .field .right-icon {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      right: 6px;   /* 기존 12px → 살짝 안쪽 */
      width: 25px;      /* 크기 키움 */
      height: 25px;     /* 크기 키움 */
      display: grid;
      place-items: center;
      justify-content: center; /* 가로 중앙 */
      color: #2f76c2;
      cursor: pointer;
      background: transparent;
      border: none;
      border-radius: 6px; /* 살짝 둥글림 */
    }

    /* 안의 SVG도 크기 확대 */
    .field .right-icon svg {
      width: 20px;
      height: 20px;
    }

    .field .right-icon:hover {
      background: rgba(47, 118, 194, 0.1); /* 연한 파랑 배경 */
      border: 1px solid #2f76c2;        /* 파랑 테두리 */
    }

    .field .right-icon { right: 12px; cursor: pointer; }

    /* ===== 보조 행(Remember/비밀번호 찾기) ===== */
    .row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin: 8px 2px 18px;
      font-size: 14px;
      color: #0d3f70;
    }
    .row a {
      color: #7aa8d9;
      text-decoration: none;
    }
    .row a:hover { text-decoration: underline; }

    /* ===== 로그인 버튼 ===== */
    .btn {
      width: 100%;
      height: 52px;
      border: 0;
      border-radius: 10px;
      background: #1e73be;
      color: #fff;
      font-size: 18px;
      letter-spacing: 0.5px;
      cursor: pointer;
    }
    .btn:hover { background: #185e9c; }

    /* ===== 오류 메시지 ===== */
    .error {
      margin: 6px 2px 0;
      color: #d64545;
      font-size: 13px;
      min-height: 18px; /* 레이아웃 흔들림 방지 */
    }

    .back-btn {
      position: absolute;
      top: 8px;    /* 로그인 박스의 상단 여백 기준 */
      left: 0;     /* 로그인 박스의 왼쪽에 붙임 */
      width: 32px;
      height: 32px;
      padding: 0;
      border: none;
      background: none;
      cursor: pointer;
    }
    .back-btn img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .back-btn:hover img {
      opacity: 0.8;
    }
  </style>
</head>
<body>
<!-- 입문자용 주석: 전체를 하나의 form으로 묶어 엔터 입력/모바일 자동 제출 동작을 활용 -->
<form class="login" id="loginForm" novalidate>
  <!-- 뒤로가기 버튼 -->
  <button type="button" class="back-btn" onclick="history.back()">
    <img src="/img/back.png" alt="뒤로가기" />
  </button>

  <!-- 아바타 영역 (SVG로 단순 사용자 아이콘) -->
  <div class="avatar" aria-hidden="true">
    <svg viewBox="0 0 24 24">
      <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z" />
    </svg>
  </div>

  <!-- Username 입력 -->
  <div class="field">
    <!-- 좌측 사용자 아이콘 -->
    <span class="left-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/>
          </svg>
        </span>
    <input
            id="username"
            name="username"
            type="text"
            placeholder="Username"
            autocomplete="username"
            aria-label="Username"
            required
    />
  </div>

  <!-- Password 입력 + 우측 가시성 토글 -->
  <div class="field">
        <span class="left-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M17 8V7a5 5 0 0 0-10 0v1H5v12h14V8Zm-8 0V7a3 3 0 0 1 6 0v1Z"/>
          </svg>
        </span>
    <input
            id="password"
            name="password"
            type="password"
            placeholder="Password"
            autocomplete="current-password"
            aria-label="Password"
            required
            minlength="4"
    />
    <!-- 눈모양 토글 버튼 -->
    <button
            type="button"
            class="right-icon"
            id="togglePw"
            aria-label="비밀번호 보이기 전환"
            title="비밀번호 보기/숨기기"
    >
      <!-- 기본: 가려진 눈 -->
      <svg id="eyeOff" viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 5.27 3.28 4l17 17L19.73 22l-3.2-3.2A10.73 10.73 0 0 1 12 20C6 20 2 12 2 12a17.5 17.5 0 0 1 4.11-5.55L2 5.27ZM12 7a5 5 0 0 1 5 5 4.91 4.91 0 0 1-.47 2.12L14.59 12A2.5 2.5 0 0 0 12 9.41L9.88 7.29A4.91 4.91 0 0 1 12 7Zm10 5s-1.64 3.11-4.27 5.19l-1.42-1.42C18.52 14.4 20 12 20 12s-3-6-8-6a9.69 9.69 0 0 0-3 .5L7.46 4.96A11.14 11.14 0 0 1 12 4c6 0 10 8 10 8Z"/>
      </svg>
      <!-- 보이는 눈 아이콘은 JS로 교체 -->
    </button>
  </div>

  <!-- 오류 표시 영역 -->
  <div id="error" class="error" role="alert" aria-live="polite"></div>

  <!-- Remember me / Forgot password -->
  <div class="row">
    <label>
      <input id="remember" type="checkbox" />
      Remember me
    </label>
    <a href="#" id="forgot">Forgot password?</a>
  </div>

  <!-- 로그인 버튼 -->
  <button class="btn" type="submit">LOGIN</button>
</form>

<script>
  // ===== 간단 동작 스크립트(입문자용) =====
  // - 비밀번호 보이기/숨기기 토글
  // - 폼 검증(빈값, 최소 길이) 및 데모 알림
  // - 로컬 저장소로 remember me 데모

  /** 비번 아이콘 토글: eye / eye-off 두 상태를 전환 */
  (function setupPasswordToggle() {
    const input = document.getElementById('password');
    const btn = document.getElementById('togglePw');

    // 보이는 눈 아이콘 SVG
    const eyeOn = `
      <svg id="eyeOn" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 4c6 0 10 8 10 8s-4 8-10 8S2 12 2 12s4-8 10-8Zm0 2C7.58 6 4.22 10.2 3.07 12 4.22 13.8 7.58 18 12 18s7.78-4.2 8.93-6C19.78 10.2 16.42 6 12 6Zm0 3a3 3 0 1 1-3 3 3 3 0 0 1 3-3Z"/>
      </svg>`;
    const eyeOff = btn.innerHTML; // 초기 eyeOff SVG 보관

    btn.addEventListener('click', () => {
      const isPassword = input.type === 'password';
      input.type = isPassword ? 'text' : 'password';
      btn.innerHTML = isPassword ? eyeOn : eyeOff;
    });
  })();

  /** 폼 제출 처리: 간단 검증 + 데모 동작 */
  (function setupForm() {
    const form = document.getElementById('loginForm');
    const error = document.getElementById('error');
    const remember = document.getElementById('remember');
    const username = document.getElementById('username');
    const password = document.getElementById('password');

    // Remember me 데모: 이전에 저장된 사용자명 복원
    const saved = localStorage.getItem('demo_username');
    if (saved) {
      username.value = saved;
      remember.checked = true;
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault(); // 실제 서버 전송 대신 데모 처리
      error.textContent = '';

      // 간단 검증: 빈값 체크 및 비밀번호 길이
      if (!username.value.trim()) {
        error.textContent = 'Username을 입력하세요.';
        username.focus();
        return;
      }
      if (!password.value) {
        error.textContent = 'Password를 입력하세요.';
        password.focus();
        return;
      }
      if (password.value.length < 4) {
        error.textContent = 'Password는 최소 4자 이상이어야 합니다.';
        password.focus();
        return;
      }

      // === 간단 사용 예시(테스트): 알림 및 콘솔 로그 ===
      alert(`로그인 시도: ${username.value}`);
      console.log('폼 데이터', {
        username: username.value,
        passwordLength: password.value.length,
        remember: remember.checked,
      });

      // 실제 서비스에서는 여기서 fetch('/api/login', { method: 'POST', body: ... })
      // 등으로 서버에 전송하고 응답 처리합니다.
    });
  })();
</script>
</body>
</html>
