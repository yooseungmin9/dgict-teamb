<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title th:text="${pageTitle}">경제 뉴스 분석 대시보드</title>
  <link rel="stylesheet" th:href="@{/css/style.css}" />
  <script th:src="@{/js/app.js}"></script>
</head>
<body>
<div th:replace="~{fragments/header :: siteHeader}"></div>

<main class="main">
  <div class="container">

    <!-- 로그인 상태 안내 블록 -->
    <section style="margin: 12px 0 20px;">
      <!-- 로그인 상태 -->
      <div th:if="${session.loginUser != null}">
        안녕하세요, <b th:text="${session.loginUser.name}">사용자</b> 님!
        <span th:if="${session.admin != null and session.admin > 0}">
          &nbsp;|&nbsp;<a th:href="@{/pages/admin}">관리자 페이지</a>
        </span>
        <form th:action="@{/pages/logout}" method="post" style="display:inline; margin-left: 12px;">
          <!-- Spring Security 사용 시 CSRF 토큰 -->
          <!-- <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" /> -->
          <button type="submit">로그아웃</button>
        </form>
      </div>

      <!-- 비로그인 상태 -->
      <div th:if="${session.loginUser == null}">
        <a th:href="@{/pages/login}">로그인</a>
        &nbsp;|&nbsp;
        <a th:href="@{/pages/signup}">회원가입</a>
      </div>
    </section>

    <!-- Dashboard Page -->
    <div id="dashboard.html" class="page">
      <h2 class="page-title" th:text="${mainPageTitle}">경제 뉴스 분석 대시보드</h2>

      <div class="dashboard-grid">

        <div class="dashboard-card" th:attr="data-url=@{/pages/news}">
          <div class="card-icon">📰</div>
          <h3 th:text="${todayNews}">오늘의 뉴스</h3>
          <p>금일 주요 경제 뉴스 요약과 전일 브리핑을 확인하세요</p>
          <div class="card-stats">5개 주요 뉴스</div>
        </div>

        <div class="dashboard-card" th:attr="data-url=@{/pages/sentiment}">
          <div class="card-icon">📊</div>
          <h3>감성 분석</h3>
          <p>경제 뉴스에 대한 시장 반응을 시각적으로 분석</p>
          <div class="card-stats">긍정 35% | 중립 45%</div>
        </div>

        <div class="dashboard-card" th:attr="data-url=@{/pages/global}">
          <div class="card-icon">🌐</div>
          <h3>글로벌 모니터링</h3>
          <p>실시간 해외 경제뉴스 헤드라인과 주요 지표</p>
          <div class="card-stats">실시간 업데이트</div>
        </div>

        <div class="dashboard-card" th:attr="data-url=@{/pages/trends}">
          <div class="card-icon">📈</div>
          <h3>트렌드 예측</h3>
          <p>소비트렌드 예측과 경제지표 상관관계 분석</p>
          <div class="card-stats">3개월 전망</div>
        </div>

        <div class="dashboard-card" th:attr="data-url=@{/pages/chat}">
          <div class="card-icon">🤖</div>
          <h3>AI 챗봇</h3>
          <p>경제뉴스와 경제용어에 대한 질문답변 서비스</p>
          <div class="card-stats">24시간 지원</div>
        </div>

        <div class="dashboard-card" th:attr="data-url=@{/pages/recommendations}">
          <div class="card-icon">📚</div>
          <h3>맞춤 추천</h3>
          <p>개인화된 경제 서적과 교육 영상 추천</p>
          <div class="card-stats">AI 큐레이션</div>
        </div>

      </div>
    </div>
  </div>
</main>

<script th:inline="javascript">
  (function () {
    function go(el) {
      var url = el.dataset.url;
      if (url) window.location.href = url;
    }
    function onClick(e) { go(e.currentTarget); }
    function onKey(e) {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); go(e.currentTarget); }
    }
    var links = document.querySelectorAll('[data-url]');
    links.forEach(function (el) {
      el.addEventListener('click', onClick);
      el.addEventListener('keydown', onKey);
      el.style.cursor = 'pointer';
    });
  })();
</script>
</body>
</html>
