<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>오늘의 경제 뉴스</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" th:href="@{/css/style.css}" />
  <script th:src="@{/js/app.js}" defer></script>
  <script th:src="@{/js/news.js}" defer></script>

  <style>
    :root{ --color-text:#111827; }

    /* ===== 리스트 그리드 ===== */
    .news-list{ display:grid; gap:12px; max-width:900px; margin:0 auto; }

    /* ===== 카드 레이아웃(좌: 썸네일 / 우: 텍스트) ===== */
    .news-card{
      border:1px solid #e5e7eb; border-radius:12px; background:#fff;
      padding:12px; cursor:pointer; transition:background .18s;
    }
    .news-card:hover{ background:#fafafa; }

    .news-wrap{ display:flex; gap:12px; align-items:flex-start; }

    /* ▶ 썸네일: 일관된 크기(작게) + 비율 유지 */
    .news-thumb{
      width:120px; height:80px;            /* 통일된 카드 썸네일 크기 */
      object-fit:cover; border-radius:8px;
      flex:0 0 120px; background:#f3f4f6;
    }

    .news-body{ flex:1; min-width:0; display:flex; flex-direction:column; }
    .news-title{ display:block; font-weight:700; color:#111827; margin-bottom:4px; }
    .news-meta{ font-size:12px; color:#6b7280; margin-bottom:4px; }
    .news-summary{ color:#374151; line-height:1.5; }

    /* ===== 모달 ===== */
    .modal{ position:fixed; inset:0; display:none; z-index:1300; }
    .modal.open{ display:block; }
    .modal-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); }

    .modal-panel{
      position:relative; max-width:720px; width:90%;
      height:calc(100vh - 40px); margin:20px auto;
      background:#fff; border-radius:16px; overflow:hidden;
      box-shadow:0 20px 40px rgba(0,0,0,.25);
      display:flex; flex-direction:column;
    }
    .modal-header{ padding:4px 12px; border-bottom:1px solid #f3f4f6; }
    .modal-title{ margin:0!important; padding:0; font-size:18px; font-weight:700; color:#111827; }
    .modal-meta{ margin-top:2px; font-size:12px; color:#6b7280; }

    .modal-body{ flex:1; overflow:auto; padding:8px 12px 12px; display:flex; flex-direction:column; align-items:center; }
    .modal .modal-content{ max-width:720px; width:92%; max-height:82vh; overflow:auto; margin:0 auto; }

    /* ▶ 모달 이미지: 더 작게 */
    .modal #modal-image{
      display:block; margin:0 auto 12px;
      max-width:50%; height:auto; max-height:240px;
      object-fit:cover; border-radius:8px; background:#f9fafb;
    }

    /* 본문 전체 노출(클램프 무효화) */
    .modal .modal-body #modal-content{
      white-space:pre-wrap!important; line-height:1.75; font-size:15px; color:var(--color-text);
      margin:4px auto 0; text-align:left; max-height:none!important; overflow:visible!important; display:block!important;
    }
    .modal #modal-content.truncate,
    .modal #modal-content.line-clamp,
    .modal #modal-content[class*="clamp"],
    .modal #modal-content[class*="truncate"]{
      max-height:none!important; overflow:visible!important; -webkit-line-clamp:unset!important; display:block!important;
    }

    .modal-footer{ display:flex; justify-content:space-between; align-items:center; border-top:1px solid #f3f4f6; padding:10px 12px; background:#fafafa; }
    .modal-close{
      position:absolute; top:14px; right:14px; width:28px; height:28px;
      background:#111827; color:#fff; border:none; border-radius:999px;
      display:flex; align-items:center; justify-content:center; font-size:16px; line-height:28px;
      box-shadow:0 2px 6px rgba(0,0,0,.18);
    }

    .btn{ display:inline-block; padding:6px 10px; border-radius:8px; border:1px solid #e5e7eb; background:#fff; cursor:pointer; }
    .btn:hover{ background:#f9fafb; }
    #modal-toggle{ display:none; }

    /* 섹션 타이틀 중앙 */
    .news-section h3{ max-width:900px; margin:24px auto 8px; }
    #news-loading,#news-error{ max-width:900px; margin:0 auto; }

    /* 브리핑 카드 */
    .briefing-card{ border:1px dashed #d1d5db; border-radius:12px; padding:12px; background:#fff; max-width:900px; margin:0 auto; }

    /* 반응형: 모바일에서 썸네일 더 작게 */
    @media (max-width:520px){
      .news-thumb{ width:96px; height:72px; flex-basis:96px; }
    }
    /* ===== 페이지네이션 ===== */
.pagination {
  display: flex;
  justify-content: center;  /* 가운데 정렬 */
  align-items: center;
  gap: 8px;                 /* 버튼 간격 */
  margin: 20px 0;           /* 위아래 여백 */
}

.page-btn {
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-radius: 6px;
  background-color: white;
  cursor: pointer;
}

.page-btn:hover {
  background-color: #f5f5f5;
}

.page-info {
  font-weight: 500;
}

  </style>
</head>
<body>
  <div th:replace="fragments/header :: siteHeader"></div>

  <main class="main">
    <div class="container">
      <div id="news-page" class="page" data-api-base="http://127.0.0.1:8005">
        <h2 class="page-title" style="text-align:center">오늘의 경제 뉴스</h2>

        <div class="news-section">
          <h3>금일 주요 뉴스</h3>
          <p id="news-loading" class="muted">불러오는 중…</p>
          <p id="news-error" class="error" style="display:none;">뉴스를 불러오지 못했습니다.</p>
          <div id="news-list" class="news-list"></div>
          <div id="pagination" class="pagination"></div>
        </div>

        <div class="news-section">
          <h3>전일 브리핑 요약</h3>
          <div class="briefing-card border rounded p-3 mt-4">
            <div class="briefing-content">
              <p>(예시) 어제 주요 경제 이슈 요약이 여기에 표시됩니다.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 상세 모달 -->
  <div id="news-modal" class="modal" aria-hidden="true">
  <div class="modal-backdrop"></div>

  <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <!-- ✅ 헤더 '밖'에 있는 닫기 버튼 -->
    <button type="button" class="modal-close" aria-label="닫기">×</button>

    <div class="modal-header">
      <h3 id="modal-title" class="modal-title"></h3>
      <div class="modal-meta">
        <span id="modal-updated" class="meta-date"></span>
      </div>
    </div>

    <div class="modal-body">
      <img id="modal-image" class="modal-image" alt="article image" style="display:none;" />
      <div class="modal-content">
        <!-- ❌ 아래 중복된 날짜 span은 삭제하세요 -->
        <!-- <span id="modal-updated" class="meta-date"></span> -->
        <p id="modal-content" class="truncate"></p>
      </div>
    </div>

    <div class="modal-footer">
      <a id="modal-link" class="btn" href="#" target="_blank" rel="noopener noreferrer">원문 링크</a>
      <span id="modal-press" class="meta-press"></span>
    </div>
  </div>
</div>

  <noscript>이 페이지를 보려면 자바스크립트를 활성화하세요.</noscript>
</body>
</html>