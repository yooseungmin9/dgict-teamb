<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SUMMARIX · 로그인</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#2563eb; --ink:#111827; --muted:#6b7280; --line:#e5e7eb;
      --radius:12px; --radius-lg:14px; --shadow:0 8px 28px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:#f8fafc; /* 대시보드 배경과 유사한 옅은 톤 */
      display:grid; place-items:center;
      padding:24px;
    }

    /* 상단 얇은 브랜드 바(대시보드 느낌 살짝 차용, 필요 없으면 지워도 됨) */
    .brand-bar{
      position:fixed; top:0; left:0; right:0; height:4px;
      background:var(--brand);
    }

    /* 카드 */
    .login{
      width:min(92vw, 420px);
      background:#fff;
      border:1px solid var(--line);
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow);
      padding:28px 22px 22px;
      position:relative;
    }

    /* 로고/아바타 */
    .avatar{
      width:72px; height:72px; margin:0 auto 14px;
      border-radius:50%;
      border:2px solid var(--brand);
      display:grid; place-items:center;
      color:var(--brand);
      background:#f7faff;
    }
    .avatar svg{width:38px; height:38px; fill:currentColor}

    .title{
      text-align:center; margin:0 0 18px;
      font-weight:800; letter-spacing:.2px;
    }
    .sub{
      text-align:center; margin:-8px 0 18px; color:var(--muted); font-size:13px;
    }

    /* 필드 */
    .field{ position:relative; margin:10px 0; }
    .field input{
      width:100%; height:48px; padding:0 46px 0 44px;
      border:1px solid var(--line); border-radius:10px; background:#fff;
      font-size:15px; color:var(--ink); outline:none;
      transition:border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
    }
    .field input::placeholder{ color:#9aa4b2; }
    .field input:focus{
      border-color:var(--brand);
      box-shadow:0 0 0 3px rgba(37,99,235,.15);
      background:#fff;
    }
    .left-icon, .right-icon{
      position:absolute; top:50%; transform:translateY(-50%);
      width:28px; height:28px; display:grid; place-items:center; color:#475569;
    }
    .left-icon{ left:10px; }
    .right-icon{ right:10px; border:none; background:transparent; cursor:pointer; border-radius:8px; }
    .right-icon:hover{ background:#f1f5f9; }
    .right-icon svg{ width:20px; height:20px; }

    /* 하단 행 */
    .row{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; margin:8px 2px 16px; font-size:14px;
    }
    .row a{ color:var(--brand); text-decoration:none; }
    .row a:hover{ text-decoration:underline; }

    /* 버튼 */
    .btn{
      width:100%; height:48px; border:1px solid transparent;
      border-radius:10px; background:var(--brand); color:#fff;
      font-weight:700; letter-spacing:.2px; cursor:pointer;
      box-shadow:0 10px 22px rgba(37,99,235,.20);
      transition:background-color .15s ease, transform .06s ease, box-shadow .15s ease;
    }
    .btn:hover{ background:#1f4fd6; }
    .btn:active{ transform:translateY(1px); box-shadow:0 8px 18px rgba(37,99,235,.18); }

    /* 에러 */
    .error{
      margin:6px 2px 0; color:#d64545; font-size:13px; min-height:18px;
    }

    /* 뒤로가기 */
    .back-btn{
      position:absolute; top:10px; left:10px;
      width:32px; height:32px; padding:0; border:none; background:transparent; cursor:pointer;
      display:grid; place-items:center; border-radius:8px;
    }
    .back-btn:hover{ background:#f1f5f9; }
    .back-btn svg{ width:18px; height:18px; color:#334155; }

    /* 푸터 링크 */
    .foot{
      margin-top:10px; text-align:center; font-size:13px; color:var(--muted);
    }
    .foot a{ color:var(--brand); text-decoration:none; }
    .foot a:hover{ text-decoration:underline; }

    /* 작은 화면 여백 보정 */
    @media (max-width:480px){
      .login{ padding:22px 16px 18px; }
    }
  </style>
</head>
<body>
<div class="brand-bar" aria-hidden="true"></div>

<!-- 서버로 전송: POST /auth/login/form -->
<form class="login" id="loginForm" th:action="@{/auth/login/form}" method="post" novalidate>
  <!-- 뒤로가기 -->
  <button type="button" class="back-btn" onclick="history.back()" aria-label="뒤로가기">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M15 18l-6-6 6-6"/>
    </svg>
  </button>

  <!-- 로고/아이콘 -->
  <div class="avatar" aria-hidden="true">
    <svg viewBox="0 0 24 24">
      <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/>
    </svg>
  </div>
  <h1 class="title">로그인</h1>
  <p class="sub">SUMMARIX 계정으로 계속 진행하세요</p>

  <!-- ID -->
  <div class="field">
      <span class="left-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/></svg>
      </span>
    <!-- ★ name="id" 유지 (백엔드 authenticate(id,password)와 매칭) -->
    <input id="id" name="id" type="text" placeholder="아이디" autocomplete="username" aria-label="아이디" required />
  </div>

  <!-- PW -->
  <div class="field">
      <span class="left-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M17 8V7a5 5 0 0 0-10 0v1H5v12h14V8Zm-8 0V7a3 3 0 0 1 6 0v1Z"/></svg>
      </span>
    <input id="password" name="password" type="password" placeholder="비밀번호"
           autocomplete="current-password" aria-label="비밀번호" required minlength="4" />
    <button type="button" class="right-icon" id="togglePw" aria-label="비밀번호 보기/숨기기">
      <svg id="eyeOff" viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 5.27 3.28 4l17 17L19.73 22l-3.2-3.2A10.73 10.73 0 0 1 12 20C6 20 2 12 2 12a17.5 17.5 0 0 1 4.11-5.55L2 5.27ZM12 7a5 5 0 0 1 5 5 4.91 4.91 0 0 1-.47 2.12L14.59 12A2.5 2.5 0 0 0 12 9.41L9.88 7.29A4.91 4.91 0 0 1 12 7Zm10 5s-1.64 3.11-4.27 5.19l-1.42-1.42C18.52 14.4 20 12 20 12s-3-6-8-6a9.69 9.69 0 0 0-3 .5L7.46 4.96A11.14 11.14 0 0 1 12 4c6 0 10 8 10 8Z"/>
      </svg>
    </button>
  </div>

  <!-- 서버 에러 메시지 -->
  <div id="error" class="error" role="alert" aria-live="polite" th:text="${error}"></div>

  <!-- 보조행 -->
  <div class="row">
    <label><input id="remember" type="checkbox" /> ID 기억하기</label>
    <a href="/member/signup">회원가입</a>
  </div>

  <!-- 로그인 -->
  <button class="btn" type="submit">로그인</button>

  <div class="foot">
    문제가 있으신가요? <a href="#">비밀번호 찾기</a>
  </div>
</form>

<script>
  // 비밀번호 토글
  (function () {
    const input = document.getElementById('password');
    const btn = document.getElementById('togglePw');
    const eyeOn = `
        <svg id="eyeOn" viewBox="0 0 24 24">
          <path fill="currentColor" d="M12 4c6 0 10 8 10 8s-4 8-10 8S2 12 2 12s4-8 10-8Zm0 2C7.58 6 4.22 10.2 3.07 12 4.22 13.8 7.58 18 12 18s7.78-4.2 8.93-6C19.78 10.2 16.42 6 12 6Zm0 3a3 3 0 1 1-3 3 3 3 0 0 1 3-3Z"/>
        </svg>`;
    const eyeOff = btn.innerHTML;
    btn.addEventListener('click', () => {
      const isPw = input.type === 'password';
      input.type = isPw ? 'text' : 'password';
      btn.innerHTML = isPw ? eyeOn : eyeOff;
    });
  })();

  // Remember me (localStorage)
  (function () {
    const form = document.getElementById('loginForm');
    const remember = document.getElementById('remember');
    const idInput = document.getElementById('id');
    const saved = localStorage.getItem('summarix_login_id');
    if (saved) { idInput.value = saved; remember.checked = true; }
    form.addEventListener('submit', () => {
      if (remember.checked) localStorage.setItem('summarix_login_id', idInput.value);
      else localStorage.removeItem('summarix_login_id');
    });
  })();
</script>
</body>
</html>
